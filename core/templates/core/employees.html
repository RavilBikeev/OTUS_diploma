{% extends "base.html" %}

{% block content %}
<div class="container mx-auto px-4 py-8 grid grid-cols-1 md:grid-cols-4 gap-6">
  <!-- –§–∏–ª—å—Ç—Ä -->
  <div class="md:col-span-1">
    <div class="bg-white rounded-2xl shadow p-4">
      <h2 class="text-lg font-semibold mb-4">–û—Ç–¥–µ–ª—ã</h2>
      <ul class="space-y-2">
        <li><a href="{% url 'employees:list' %}" class="text-blue-600 hover:underline {% if not selected_department %}font-bold{% endif %}">–í—Å–µ</a></li>
        {% for dept in departments %}
          <li>
            <a href="?department={{ dept.id }}" class="text-blue-600 hover:underline {% if selected_department.id == dept.id %}font-bold{% endif %}">
              {{ dept.name }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <!-- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ -->
  <div class="md:col-span-3">
    <h1 class="text-3xl font-bold text-gray-800 mb-6">–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h1>
    <form method="get" action="" class="mb-6 flex items-center gap-2">
      <input type="text" name="q" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏" value="{{ search_query }}"
        class="border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400" />
      <button type="submit" class="text-blue-600 text-xl">üîç</button>

      {% if request.GET.department %}
        <input type="hidden" name="department" value="{{ request.GET.department }}">
      {% endif %}
    </form>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      {% for employee in employees %}
        <div class="bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition flex flex-col items-center">
          <div class="w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center text-3xl text-gray-500 mb-4">
            üë§
          </div>
          <h3 class="text-lg font-bold text-center mb-1">
            {{ employee.full_name|default:"–ò–º—è –§–∞–º–∏–ª–∏—è" }}
          </h3>
          <p class="text-sm text-gray-600 text-center">
            {{ employee.position|default:"–î–æ–ª–∂–Ω–æ—Å—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω–∞" }}
          </p>
          <p class="text-sm text-gray-500 text-center mt-1">
            {{ employee.department.name|default:"–ë–µ–∑ –æ—Ç–¥–µ–ª–∞" }}
          </p>
          <p class="text-xs text-gray-400 text-center mt-2">
            {% if employee.days_in_company %}
              {{ employee.days_in_company }} –¥–Ω–µ–π –≤ –∫–æ–º–ø–∞–Ω–∏–∏
            {% else %}
              –ú–µ–Ω—å—à–µ –¥–Ω—è –≤ –∫–æ–º–ø–∞–Ω–∏–∏
            {% endif %}
          </p>
        </div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
